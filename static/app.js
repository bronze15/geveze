!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},n={},o={},r={}.hasOwnProperty,i=/^\.\.?(\/|$)/,a=function(e,t){for(var n,o=[],r=(i.test(t)?e+"/"+t:t).split("/"),a=0,s=r.length;a<s;a++)n=r[a],".."===n?o.pop():"."!==n&&""!==n&&o.push(n);return o.join("/")},s=function(e){return e.split("/").slice(0,-1).join("/")},c=function(t){return function(n){var o=a(s(t),n);return e.require(o,t)}},d=function(e,t){var o=null;o=m&&m.createHot(e);var r={id:e,exports:{},hot:o};return n[e]=r,t(r.exports,c(e),r),r.exports},u=function(e){return o[e]?u(o[e]):e},l=function(e,t){return u(a(s(e),t))},f=function(e,o){null==o&&(o="/");var i=u(e);if(r.call(n,i))return n[i].exports;if(r.call(t,i))return d(i,t[i]);throw new Error("Cannot find module '"+e+"' from '"+o+"'")};f.alias=function(e,t){o[t]=e};var p=/\.[^.\/]+$/,v=/\/index(\.[^\/]+)?$/,w=function(e){if(p.test(e)){var t=e.replace(p,"");r.call(o,t)&&o[t].replace(p,"")!==t+"/index"||(o[t]=e)}if(v.test(e)){var n=e.replace(v,"");r.call(o,n)||(o[n]=e)}};f.register=f.define=function(e,o){if("object"==typeof e)for(var i in e)r.call(e,i)&&f.register(i,e[i]);else t[e]=o,delete n[e],w(e)},f.list=function(){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e};var m=e._hmr&&new e._hmr(l,f,t,n);f._cache=n,f.hmr=m&&m.wrap,f.brunch=!0,e.require=f}}(),function(){var e;window;require.register("chat_init.js",function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){var t=e.formToDict();""!==t.body&&(window.geveze.message(t.body),e.find("input[type=text]").val("").select())}var a=t("messages"),s=(r(a),t("helpers")),c=(r(s),t("./geveze")),d=r(c),u=t("jquery"),l=o(u);window.$=t("jquery"),window.jQuery=l["default"],window.Vue=t("vue"),window.faker=t("faker"),document.addEventListener("DOMContentLoaded",function(){console.info("Initialized app");var e={recover:!0,test:!1,log:"verbose",send_avatar:!0,slow_down:0},t=new Vue({el:"#app",data:{messages:[],avatar:{},online_users:{}}});window.geveze=new d.Geveze({url:"ws://localhost:8888/rooms/1000/ws?id="+faker.internet.userName(),settings:e,app:t})}),(0,l["default"])(document).ready(function(){window.console||(window.console={}),window.console.log||(window.console.log=function(){}),(0,l["default"])("#messageform").on("submit",function(){return i((0,l["default"])(this)),!1}),(0,l["default"])("#messageform").on("keypress",function(e){if(13==e.keyCode)return i((0,l["default"])(this)),!1}),(0,l["default"])("#message").select()}),jQuery.fn.formToDict=function(){for(var e=this.serializeArray(),t={},n=0;n<e.length;n++)t[e[n].name]=e[n].value;return t.next&&delete t.next,t}}),require.register("example.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.data={messages:["âœ‹","ðŸ˜","hi...","www.google.com","mailto:serefguneysu@gmail.com","intent://scan/#Intent;scheme=zxing;package=com.google.zxing.client.android;S.browser_fallback_url=http%3A%2F%2Fzxing.org;end","intent://scan/#Intent;scheme=zxing;package=com.google.zxing.client.android;end"],images:["http://placehold.it/200x200/bbaaaa/ffffff?text=image-1","http://placehold.it/200x200/aabbaa/ffffff?text=image-2","http://placehold.it/200x200/aaaabb/ffffff?text=image-3"],videos:["http://www.sample-videos.com/video/mkv/240/big_buck_bunny_240p_1mb.mkv","http://www.sample-videos.com/video/mp4/240/big_buck_bunny_240p_1mb.mp4"],audios:["http://www.w3schools.com/html/horse.ogg"],pdfs:["http://www.publishers.org.uk/_resources/assets/attachment/full/0/2091.pdf"],files:["http://humanstxt.org/humans.txt"]}}),require.register("exceptions/index.js",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0});e.NotImplementedException=function(e){function t(e){o(this,t);var n=r(this,Object.getPrototypeOf(t).call(this));return n.message="Not Implemented",n}return i(t,e),t}(Error)}),require.register("geveze.js",function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Geveze=void 0;var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=t("helpers"),s=o(a),c=t("messages"),d=(o(c),t("exceptions")),u=(o(d),t("example")),l=(o(u),t("faker")),f={send_avatar:"send_avatar",get_onlineusers:"get_onlineusers",get_avatars:"get_avatars",send_text:"send_text",send_image:"send_image",send_video:"send_video",send_audio:"send_audio",send_pdf:"send_pdf",send_file:"send_file"},p={subscribed:"subscribed",unsubscribed:"unsubscribed",send_uuid:"send_uuid",send_avatars:"send_avatars",send_avatar:"send_avatar",send_text:"send_text",send_image:"send_image",send_video:"send_video",send_audio:"send_audio",send_pdf:"send_pdf",send_file:"send_file",send_onlineusers:"send_onlineusers"};e.Geveze=function(){function e(t){r(this,e),this._settings=t.settings||{recover:!1},this.avatar=new s.AvatarImage,this.url=t.url,this._app=t.app,this._retry_interval=.5,this.connect()}return i(e,[{key:"sendAvatar",value:function(){this.send({type:f.send_avatar,src:this.avatar.src}),console.debug("sendAvatar();")}},{key:"getOnlineUsers",value:function(){this.send({type:f.get_onlineusers}),console.debug("getOnlineUsers();")}},{key:"connect",value:function(){var e=this;this.ws=new WebSocket(this.url),this.ws.onopen=function(t){e.settings.log&&console.debug("connection opened: "+t.target.url+"}");t.target},this.ws.addEventListener("open",function(t){e.settings.send_avatar&&e.sendAvatar()}),this.ws.addEventListener("open",function(t){e.send({type:f.get_avatars})}),this.ws.onclose=function(t){e.settings.log&&console.warn("closed: "+t.target.url+"}. code: "+t.code+" reason: "+t.reason+"."),e.settings.recover&&(e.retry_interval*=2,setTimeout(function(){console.warn("connection can not be established. trying in "+e.retry_interval+" seconds."),e.connect()},1e3*e.retry_interval))},this.ws.onmessage=function(t){var n=JSON.parse(t.data);e.broker(n)},this.ws.addEventListener("message",function(t){var n=JSON.parse(t.data);switch(e.settings.log){case"short":console.debug({type:n.type,uuid:n.uuid,room:n.room,src:n.src,sender:n.sender,time:n.date,body:n.body,users:n.users});break;case"verbose":console.debug(n)}}),this.ws.onerror=function(e){var t=e.data;console.error(t)}}},{key:"send",value:function(e){var t=this;switch(e.type){case f.send_text:var n=[{src:this.avatar.src},!0];e.avatar=n[0],e.is_me=n[1],this.app.messages.push(e),setTimeout(function(){t.ws.send(JSON.stringify(e))},this.settings.slow_down);break;default:this.ws.send(JSON.stringify(e))}}},{key:"message",value:function(e){this.send({body:e,type:f.send_text,uuid:l.random.uuid()})}},{key:"broker",value:function(e){switch(console.debug("data type: "+e.type),console.debug(e),e.type){case p.send_uuid:this.uuid=e.uuid;break;case p.send_avatar:this.app.avatar[e.sender]=e.src,this.getOnlineUsers();break;case p.send_avatars:for(var t in e.avatars)this.app.avatar[t]=e.avatars[t];break;case f.send_text:var n=[{src:this.app.avatar[e.sender]},this.is_me(e)];e.avatar=n[0],e.is_me=n[1],this.app.messages.push(e);break;case p.send_onlineusers:this.app.online_users={};var o=!0,r=!1,i=void 0;try{for(var a,s=e.online_users[Symbol.iterator]();!(o=(a=s.next()).done);o=!0){var c=a.value;this.app.online_users[c]={avatar:this.app.avatar[c]}}}catch(d){r=!0,i=d}finally{try{!o&&s["return"]&&s["return"]()}finally{if(r)throw i}}}}},{key:"is_me",value:function(e){return e.sender===this.uuid}},{key:"close",value:function(){this.ws.close()}},{key:"app",get:function(){return this._app},set:function(e){this._app=e}},{key:"retry_interval",get:function(){return this._retry_interval},set:function(e){this._retry_interval=e}},{key:"settings",get:function(){return this._settings},set:function(e){this._settings=e}},{key:"uuid",get:function(){return this._uuid},set:function(e){this._uuid=e}}]),e}()}),require.register("helpers/bitmap.js",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();e.Bitmap=function(){function e(){o(this,e)}return r(e,[{key:"new",value:function(t,n){if(!window.btoa)return console.error("Oh no, your browser does not support base64 encoding - window.btoa()!!"),!1;n=n||1,1!=n&&(t=e._scaleRows(t,n));var o,r=t.length,i=r?t[0].length:0,a=(4-3*i%4)%4,s=(3*i+a)*r,c=54+s;return r=e._asLittleEndianHex(r,4),i=e._asLittleEndianHex(i,4),s=e._asLittleEndianHex(s,4),c=e._asLittleEndianHex(c,4),o="BM"+c+"\0\0\0\x006\0\0\0(\0\0\0"+i+r+"\0\0\0\0\0\0"+s+"\x0B\0\0\x0B\0\0\0\0\0\0\0\0\0\0"+e._collapseData(t,a),"data:image/bmp;base64,"+btoa(o)}}],[{key:"_asLittleEndianHex",value:function(e,t){for(var n=[];t>0;t--)n.push(String.fromCharCode(255&e)),e>>=8;return n.join("")}},{key:"_collapseData",value:function(e,t){for(var n,o,r,i=e.length,a=i?e[0].length:0,s="",c=[];t>0;t--)s+="\0";for(n=0;n<i;n++){for(o=0;o<a;o++)r=e[n][o],c.push(String.fromCharCode(r[2])+String.fromCharCode(r[1])+String.fromCharCode(r[0]));c.push(s)}return c.join("")}},{key:"_scaleRows",value:function(e,t){var n,o,r,i=e.length,a=parseInt(i*t),s=i?e[0].length:0,c=parseInt(s*t),d=[];for(r=0;r<c;r++)for(d.push(n=[]),o=0;o<a;o++)n.push(e[parseInt(r/t)][parseInt(o/t)]);return d}}]),e}()}),require.register("helpers/custom_faker.js",function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=e.Fake={bool:function(e){return Math.random()<.5},date:function(e){return new Date(e.start.getTime()+Math.random()*(e.end.getTime()-e.start.getTime()))},"float":function(e){return e.min+Math.random()*(e.max-e.min)},"int":function(e){return 0|o["float"](e)},select:function(e){var t=o["int"]({min:0,max:e.length});return e[t]}}}),require.register("helpers/index.js",function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=t("./custom_faker"),s=o(a),c=t("./bitmap"),d=t("faker"),u=function(){function e(t){r(this,e),t=t||{},this.bitmap=new c.Bitmap,this.src=this["new"](t.size||24,a.Fake["int"]({min:t.min||3,max:t.max||3})),this.args=t}return i(e,[{key:"renew",value:function(){this.src=this["new"](this.args.size||24,a.Fake["int"]({min:this.args.min||3,max:this.args.max||3}))}},{key:"new",value:function(e,t){return this.bitmap["new"](this.rows(t),this.scale(e,t))}},{key:"dom",value:function(){var e=d.random.uuid()+".bmp",t=document.createElement("img");return t.setAttribute("src",this.src),t.setAttribute("data-uuid",e),t.classList.add("avatar"),t.onclick=function(){for(var n=atob(t.src.split(",")[1]),o=new ArrayBuffer(n.length),r=new Uint8Array(o),i=0;i<n.length;i++)r[i]=255&n.charCodeAt(i);try{var a=new Blob([o],{type:"application/octet-stream"})}catch(s){var c=new(window.WebKitBlobBuilder||window.MozBlobBuilder);c.append(o);var a=c.getBlob("application/octet-stream")}var d=window.URL.createObjectURL(a),u=document.createElement("a");console.log(e),u.download=t.getAttribute("data-uuid"),u.href=d,u.click()},t}},{key:"rows",value:function(){for(var e=arguments.length<=0||void 0===arguments[0]?5:arguments[0],t=[],n=[[240,240,240],[a.Fake["int"]({min:0,max:255}),a.Fake["int"]({min:0,max:255}),a.Fake["int"]({min:0,max:255})]],o=0;o<e;o++){t.push([]);for(var r=0;r<e;r++)t[o][r]=n[a.Fake["int"]({min:0,max:2})]}return t}},{key:"scale",value:function(){var e=arguments.length<=0||void 0===arguments[0]?24:arguments[0],t=arguments.length<=1||void 0===arguments[1]?3:arguments[1];return e/t}}]),e}();n.exports={custom_faker:s,AvatarImage:u}}),require.register("initialize.js",function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function i(e){var t=e.formToDict();""!==t.body&&(window.geveze.message(t.body),e.find("input[type=text]").val("").select())}var a=t("messages"),s=(r(a),t("helpers")),c=(r(s),t("./geveze")),d=r(c),u=t("jquery"),l=o(u);window.$=t("jquery"),window.jQuery=l["default"],window.Vue=t("vue"),window.faker=t("faker"),document.addEventListener("DOMContentLoaded",function(){console.info("Initialized app");var e={recover:!0,test:!1,log:"verbose",send_avatar:!0,slow_down:0},t=new Vue({el:"#app",data:{messages:[],avatar:{},online_users:{}}});window.geveze=new d.Geveze({url:"ws://localhost:8888/rooms/1000/ws?id="+faker.internet.userName(),settings:e,app:t})}),(0,l["default"])(document).ready(function(){window.console||(window.console={}),window.console.log||(window.console.log=function(){}),(0,l["default"])("#messageform").on("submit",function(){return i((0,l["default"])(this)),!1}),(0,l["default"])("#messageform").on("keypress",function(e){if(13==e.keyCode)return i((0,l["default"])(this)),!1}),(0,l["default"])("#message").select()}),jQuery.fn.formToDict=function(){for(var e=this.serializeArray(),t={},n=0;n<e.length;n++)t[e[n].name]=e[n].value;return t.next&&delete t.next,t}}),require.register("messages/index.js",function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=t("faker");e.Message=function(){function e(t){o(this,e),this.data=t.data||{},this.data.uuid=i.random.uuid()}return r(e,[{key:"cookie",value:function(e){var t=document.cookie.match("\\b"+e+"=([^;]*)\\b");return t?t[1]:void 0}},{key:"xsrf",get:function(){return this.cookie("_xsrf")}},{key:"data",set:function(e){this._data=e},get:function(){return this._data}},{key:"json",get:function(){return JSON.stringify(this.data)}}]),e}()}),require.register("video/app.js",function(e,t,n){"use strict";n.exports={}}),require.register("video/chat.js",function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}var r=t("video/socket"),i=o(r);window.adapter=t("adapterjs"),document.addEventListener("DOMContentLoaded",function(){console.debug("[document.DOMContentLoaded] "+ +new Date);i.factory("ws://echo.websocket.org")}),window.addEventListener("load",function(){console.debug("[window.load] "+ +new Date)})}),require.register("video/index.js",function(e,t,n){"use strict";t("adapterjs"),document.addEventListener("DOMContentLoaded",function(){window.notify=function(e,t){var n={body:e,icon:"https://developer.cdn.mozilla.net/static/img/favicon57.a2490b9a2d76.png"},o=new Notification(t||e,n);o.onclick=function(e){window.focus(),e.target.close()}},"Notification"in window&&Notification.requestPermission().then(function(e){console.debug=window.notify})}());var o=function(){function e(){var e=void 0,t=void 0,n=void 0,o=void 0;e=location.hostname,t=location.host,n=location.protocol,o="https:"===location.protocol;var r="ws"+(o?"s":"")+"://"+t+"/ws";return r}console.debug();var t=e(),n=new WebSocket(t);return n};n.exports={wsFactory:o}}),require.register("video/recorder.js",function(e,t,n){"use strict";function o(e){console.log("getUserMedia() got stream: ",e),window.stream=e,window.URL?g.src=window.URL.createObjectURL(e):g.src=e}function r(e){console.log("navigator.getUserMedia error: ",e)}function i(e){console.log("MediaSource opened"),m=p.addSourceBuffer('video/webm; codecs="vp8"'),console.log("Source buffer: ",m)}function a(e){e.data&&e.data.size>0&&w.push(e.data)}function s(e){console.log("Recorder stopped: ",e)}function c(){"Start Recording"===y.textContent?d():(u(),y.textContent="Start Recording",b.disabled=!1,_.disabled=!1)}function d(){w=[];var e={mimeType:"video/webm;codecs=vp9"};MediaRecorder.isTypeSupported(e.mimeType)||(console.log(e.mimeType+" is not Supported"),e={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(e.mimeType)||(console.log(e.mimeType+" is not Supported"),e={mimeType:"video/webm"},MediaRecorder.isTypeSupported(e.mimeType)||(console.log(e.mimeType+" is not Supported"),e={mimeType:""})));try{v=new MediaRecorder(window.stream,e)}catch(t){return console.error("Exception while creating MediaRecorder: "+t),void alert("Exception while creating MediaRecorder: "+t+". mimeType: "+e.mimeType)}console.log("Created MediaRecorder",v,"with options",e),y.textContent="Stop Recording",b.disabled=!0,_.disabled=!0,v.onstop=s,v.ondataavailable=a,v.start(10),console.log("MediaRecorder started",v)}function u(){v.stop(),console.log("Recorded Blobs: ",w),h.controls=!0}function l(){var e=new Blob(w,{type:"video/webm"});h.src=window.URL.createObjectURL(e)}function f(){var e=new Blob(w,{type:"video/webm"}),t=window.URL.createObjectURL(e),n=document.createElement("a");n.style.display="none",n.href=t,n.download="video.webm",document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),window.URL.revokeObjectURL(t)},100)}var p=new MediaSource;p.addEventListener("sourceopen",i,!1);var v,w,m,g=document.querySelector("video#gum"),h=document.querySelector("video#recorded"),y=document.querySelector("button#record"),b=document.querySelector("button#play"),_=document.querySelector("button#download");y.onclick=c,b.onclick=l,_.onclick=f;var k="https:"===location.protocol||"localhost"!==location.host;k||console.error("getUserMedia() must be run from a secure origin: HTTPS or localhost.");var x={audio:!0,video:!0};navigator.mediaDevices.getUserMedia(x).then(o)["catch"](r),h.addEventListener("error",function(e){console.error("MediaRecording.recordedMedia.error()"),alert("Your browser can not play\n\n"+h.src+"\n\n media clip. event: "+JSON.stringify(e))},!0),n.exports={}}),require.register("video/socket.js",function(e,t,n){"use strict";var o=function(){function e(e){if("string"==typeof e)return new WebSocket(e);var t=void 0,n=void 0,o=void 0,r=void 0;t=location.hostname,n=location.host,o=location.protocol,r="https:"===location.protocol;var i="ws"+(r?"s":"")+"://"+n+"/ws";return i}console.debug();var t=e(),n=new WebSocket(t);return n.binaryType="arraybuffer",n};n.exports={factory:o}}),require.register("video/stream.js",function(e,t,n){"use strict";function o(e){console.log("MediaSource opened"),sourceBuffer=mediaSource.addSourceBuffer('video/webm; codecs="vp8"'),console.log("Source buffer: ",sourceBuffer)}function r(e){console.log("getUserMedia() got stream: ",e),window.stream=e,window.URL?s.src=window.URL.createObjectURL(e):s.src=e}function i(e){console.log("navigator.getUserMedia error: ",e)}window.addEventListener("load",function(){});var a=t("video");window.ws=a.wsFactory(),window.ws.binaryType="arraybuffer",ws.onopen=function(e){},ws.onclose=function(e){ws=a.wsFactory()},ws.onmessage=function(e){var t=new Blob([e.data],{type:"video/webm"});d.src=window.URL.createObjectURL(t),d.controls=!0},window.addEventListener("load",function(){var e=new MediaSource;e.addEventListener("sourceopen",o,!1)}),window.startRecording=function(){window.recordedBlobs=[];var e={mimeType:"video/webm;codecs=vp9"};MediaRecorder.isTypeSupported(e.mimeType)||(console.log(e.mimeType+" is not Supported"),e={mimeType:"video/webm;codecs=vp8"},MediaRecorder.isTypeSupported(e.mimeType)||(console.log(e.mimeType+" is not Supported"),e={mimeType:"video/webm"},MediaRecorder.isTypeSupported(e.mimeType)||(console.log(e.mimeType+" is not Supported"),e={mimeType:""})));try{window.mediaRecorder=new MediaRecorder(window.stream,e)}catch(t){return console.error("Exception while creating MediaRecorder: "+t),void console.error("Exception while creating MediaRecorder: "+t+". mimeType: "+e.mimeType)}console.log("Created MediaRecorder",mediaRecorder,"with options",e),mediaRecorder.onstop=handleStop,mediaRecorder.ondataavailable=handleDataAvailable,mediaRecorder.start(50),console.log("MediaRecorder started",mediaRecorder)},window.stopRecording=function(){window.mediaRecorder.stop(),console.log("Recorded Blobs: ",recordedBlobs),c.controls=!0},window.handleDataAvailable=function(e){e.data&&e.data.size>0&&recordedBlobs.push(e.data)},window.play=function(){var e=new Blob(recordedBlobs,{type:"video/webm"});c.src=window.URL.createObjectURL(e)},window.handleStop=function(e){console.log("Recorder stopped: ",e)};var s=document.querySelector("video#gum"),c=document.querySelector("video#recorded"),d=document.querySelector("video#remote"),u=document.querySelector("button#send");c.addEventListener("error",function(e){console.error("MediaRecording.recordedMedia.error()"),alert("Your browser can not play\n\n"+c.src+"\n\n media clip. event: "+JSON.stringify(e))},!0),window.mediaSource=new MediaSource,mediaSource.addEventListener("sourceopen",o,!1),window.mediaRecorder,window.recordedBlobs,window.sourceBuffer,window.stream;var l={audio:!1,video:!0};navigator.mediaDevices.getUserMedia(l).then(r)["catch"](i),u.onclick=function(e){startRecording(),setTimeout(function(){stopRecording(),play();var e=new Blob(recordedBlobs,{type:"video/webm"});ws.send(e)},1e3)}}),require.alias("brunch/node_modules/deppack/node_modules/node-browser-modules/node_modules/process/browser.js","process"),e=require("process"),require.register("___globals___",function(e,t,n){})}(),require("___globals___");